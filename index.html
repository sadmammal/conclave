<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-translate="pageTitle">Fantasy Conclave Vote</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Manrope:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /*
      =========================================================================
      CSS Styles
      This section defines the visual appearance and layout of the page
      using custom CSS rules and Tailwind CSS classes. It includes styles
      for general elements, layout containers, interactive components,
      modals, and responsive adjustments.
      =========================================================================
      */

      /* Base styles for the body */
      body {
        font-family: "Manrope", sans-serif;
        line-height: 1.6;
        padding: 0;
        margin: 0;
        background-color: #f3f4f6;
        color: #2d3748;
        transition: background-color 0.3s ease, color 0.3s ease;
        padding-top: 80px;
      }
      /* Container for the main two-column layout */
      .container {
        width: 100%;
        max-width: 1000px;
        margin: 40px auto;
        padding: 0;
        border-radius: 12mm;
        overflow: hidden;
        display: grid;
        grid-template-columns: minmax(auto, 400px) 1fr;
        gap: 0;
      }

      /* Styles for the language toggle buttons */
      .language-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        z-index: 20;
        display: inline-flex;
        border: 1px solid #cbd5e0;
        border-radius: 4mm;
        overflow: hidden;
        background-color: #ffffff;
      }

      .language-button {
        padding: 6px 10px;
        background-color: transparent;
        color: #4a5568;
        border: none;
        border-right: 1px solid #cbd5e0;
        cursor: pointer;
        font-size: 0.85rem;
        font-weight: 600;
        transition: background-color 0.2s ease, color 0.2s ease;
      }

      .language-button:last-child {
        border-right: none;
      }

      .language-button:hover {
        background-color: #edf2f7;
        color: #2d3748;
      }

      .language-button.active {
        background-color: #8b1e3f;
        color: #ffffff;
      }

      /* Styles for the dark mode toggle button */
      .dark-mode-toggle {
        position: absolute;
        top: 20px;
        right: 120px;
        z-index: 20;
      }

      .dark-mode-button {
        padding: 6px 10px;
        background-color: #ffffff;
        color: #4a5568;
        border: 1px solid #cbd5e0;
        border-radius: 4mm;
        cursor: pointer;
        font-size: 0.85rem;
        font-weight: 600;
        transition: background-color 0.2s ease, color 0.2s ease,
          border-color 0.2s ease;
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .dark-mode-button:hover {
        background-color: #edf2f7;
        color: #2d3748;
        border-color: #a0aec0;
      }

      /* Styles for the left content column */
      .left-column {
        padding: 30px;
        background-color: #ffffff;
        border-right: 1px solid #e2e8f0;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        gap: 20px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }

      /* Styles for the right content column */
      .right-column {
        padding: 30px;
        background-color: #ffffff;
        display: grid;
        gap: 30px;
        transition: background-color 0.3s ease;
        padding-bottom: 120px;
      }

      /* Typography styles for headings and paragraphs */
      h1 {
        font-family: "Lora", serif;
        color: #8b1e3f;
        text-align: left;
        margin-top: 0;
        margin-bottom: 20px;
        line-height: 1.1;
      }
      h2 {
        font-family: "Lora", serif;
        color: #6648b1;
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 2rem;
        font-weight: 700;
        border-bottom: 1px solid #e2e8f0;
        padding-bottom: 6px;
        transition: color 0.3s ease, border-color 0.3s ease;
      }
      h3 {
        font-family: "Manrope", sans-serif;
        color: #8b1e3f;
        margin-top: 0;
        margin-bottom: 4px;
        font-size: 1.05rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        line-height: 1.4;
        transition: color 0.3s ease;
      }
      h3 .flag {
        margin-left: 8px;
        font-size: 1.1rem;
      }
      p {
        margin-bottom: 15px;
        text-align: left;
        font-size: 0.9rem;
        line-height: 1.7;
        transition: color 0.3s ease;
      }
      ul {
        list-style: none;
        padding: 0;
        margin-bottom: 10px;
      }
      ul li {
        margin-bottom: 6px;
        font-size: 0.9rem;
        transition: color 0.3s ease;
      }
      strong {
        color: #4a5568;
        font-weight: 600;
        transition: color 0.3s ease;
      }

      /* Styles for the grid layout of candidate selections */
      .candidate-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        margin-top: 15px;
        grid-auto-rows: auto;
      }

      .candidate-section {
      }

      /* Styles for individual candidate labels (clickable areas) */
      .candidate-label {
        display: flex;
        align-items: flex-start;
        border: 1px solid #e2e8f0;
        padding: 20px;
        border-radius: 8mm;
        background-color: #ffffff;
        color: #2d3748;
        cursor: pointer;
        transition: background-color 0.3s ease-in-out,
          border-color 0.3s ease-in-out, color 0.3s ease;
        height: 100%;
        box-sizing: border-box;
        position: relative;
      }

      .candidate-label:hover {
        background-color: #edf2f7;
      }

      .candidate-label.selected {
        border-color: #6648b1;
      }

      /* Styles for the rank indicator circle */
      .rank-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 30px;
        height: 30px;
        color: #ffffff;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: 700;
        font-size: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        opacity: 0;
        transition: opacity 0.3s ease, background-color 0.3s ease,
          border-color 0.3s ease, color 0.3s ease;
      }

      .candidate-label.selected .rank-indicator {
        opacity: 1;
      }

      /* Color coding for selected ranks */
      .candidate-label.selected.rank-1 {
        background-color: #fffacd;
        border-color: #daa520;
      }
      body.dark-mode .candidate-label.selected.rank-1 {
        background-color: #4a4020; /* Dark Gold */
        border-color: #c0a040; /* Muted Gold */
        color: #e0e0e0; /* Primary Text */
      }
      .candidate-label.selected.rank-1 .rank-indicator {
        background-color: #daa520;
        border-color: #fffacd;
      }
      body.dark-mode .candidate-label.selected.rank-1 .rank-indicator {
        background-color: #c0a040; /* Muted Gold */
        border-color: #4a4020; /* Dark Gold */
        color: #e0e0e0; /* Primary Text */
      }

      .candidate-label.selected.rank-2 {
        background-color: #e6e6fa;
        border-color: #b0c4de;
      }
      body.dark-mode .candidate-label.selected.rank-2 {
        background-color: #304040; /* Dark Blue-Gray */
        border-color: #80a0a0; /* Muted Blue-Gray */
        color: #e0e0e0; /* Primary Text */
      }
      .candidate-label.selected.rank-2 .rank-indicator {
        background-color: #b0c4de;
        border-color: #e6e6fa;
      }
      body.dark-mode .candidate-label.selected.rank-2 .rank-indicator {
        background-color: #80a0a0; /* Muted Blue-Gray */
        border-color: #304040; /* Dark Blue-Gray */
        color: #e0e0e0; /* Primary Text */
      }

      .candidate-label.selected.rank-3 {
        background-color: #f0e68c;
        border-color: #b8860b;
      }
      body.dark-mode .candidate-label.selected.rank-3 {
        background-color: #403020; /* Dark Brown */
        border-color: #a08060; /* Muted Bronze */
        color: #e0e0e0; /* Primary Text */
      }
      .candidate-label.selected.rank-3 .rank-indicator {
        background-color: #b8860b;
        border-color: #f0e68c;
      }
      body.dark-mode .candidate-label.selected.rank-3 .rank-indicator {
        background-color: #a08060; /* Muted Bronze */
        border-color: #403020; /* Dark Brown */
        color: #e0e0e0; /* Primary Text */
      }

      .candidate-info {
        flex-grow: 1;
      }
      .candidate-info h3 {
        margin-bottom: 5px;
      }

      /* Styles for the collapsible key issues section */
      .key-issues-toggle {
        font-weight: 600;
        cursor: pointer;
        color: #6648b1;
        margin-bottom: 8px;
        display: block;
        font-size: 0.9rem;
        text-decoration: none;
        text-underline-offset: 2px;
        transition: color 0.2s ease, text-decoration 0.2s ease;
      }

      body.dark-mode .key-issues-toggle {
        color: #80cbc4;
      }

      .key-issues-toggle:hover {
        color: #4a3a9d;
        text-decoration: none;
      }

      body.dark-mode .key-issues-toggle:hover {
        color: #4db6ac;
      }

      .key-issues-content {
        display: none;
        margin-top: 10px;
        border-top: 1px solid #e2e8f0;
        padding-top: 10px;
        transition: border-color 0.3s ease;
      }

      .key-issues-content.active {
        display: block;
      }

      .key-issues-content ul {
        list-style: disc;
        margin-left: 20px;
        padding: 0;
      }

      .key-issues-content ul li {
        margin-bottom: 4px;
        font-size: 0.85rem;
        line-height: 1.5;
      }

      /* Styles for the list of papal names */
      .papal-name-list {
        list-style: none;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 10px;
      }

      /* Styles for individual papal name list items */
      .papal-name-item {
        border: 1px solid #e2e8f0;
        padding: 10px;
        border-radius: 4mm;
        background-color: #ffffff;
        color: #2d3748;
        cursor: pointer;
        transition: background-color 0.2s ease-in-out,
          border-color 0.2s ease-in-out, color 0.3s ease;
        display: flex;
        align-items: center;
        position: relative;
      }

      .papal-name-item:hover {
        background-color: #edf2f7;
      }

      .papal-name-item.selected {
        background-color: #d1e7dd;
        border-color: #0f5132;
        color: #0f5132;
      }
      body.dark-mode .papal-name-item.selected {
        background-color: #1a3a3a;
        border-color: #5a9a9a;
        color: #e0e0e0;
      }

      .papal-name-item input[type="checkbox"] {
        margin-right: 10px;
      }

      .papal-name-item label {
        display: flex;
        align-items: center;
        width: 100%;
        cursor: pointer;
      }

      .papal-name-item span {
        flex-grow: 1;
      }

      .papal-name-item .name-info {
        font-size: 0.8rem;
        color: #4a5568;
        margin-left: auto;
        transition: color 0.3s ease;
      }
      body.dark-mode .papal-name-item .name-info {
        color: #bdbdbd;
      }

      /* Styles for the fixed submit button container at the bottom */
      .submit-button-container {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #ffffff;
        padding: 15px 30px;
        box-sizing: border-box;
        z-index: 1000;
        border-top: 1px solid #e2e8f0;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }
      body.dark-mode .submit-button-container {
        background-color: #1a2b3c;
        border-top-color: #304055;
      }

      /* Wrapper for submit and reset buttons */
      .button-wrapper {
        display: flex;
        justify-content: center;
        gap: 20px;
        width: 100%;
      }

      /* Styles for submit and reset buttons */
      .submit-button,
      .reset-button {
        display: block;
        flex-grow: 0;
        flex-shrink: 0;
        padding: 12px 20px;
        border: none;
        border-radius: 6mm;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s ease, opacity 0.3s ease;
        font-weight: 700;
        letter-spacing: 1px;
      }

      .submit-button {
        background-color: #8b1e3f;
        color: #ffffff;
      }
      .submit-button:hover:not(:disabled) {
        background-color: #6a1731;
      }
      .submit-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .reset-button {
        background-color: #e2e8f0;
        color: #2d3748;
        transition: background-color 0.3s ease, color 0.3s ease;
      }
      .reset-button:hover {
        background-color: #cbd5e0;
      }
      body.dark-mode .reset-button {
        background-color: #607d8b;
        color: #e0e0e0;
      }
      body.dark-mode .reset-button:hover {
        background-color: #78909c;
      }

      /* Styles for the submission output area */
      .submission-output {
        margin-top: 40px;
        padding: 30px;
        background-color: #e2e8f0;
        border: 2px solid #6648b1;
        border-radius: 8mm;
        display: none;
        font-size: 1rem;
        color: #2d3748;
        text-align: left;
        line-height: 1.6;
        animation: fadeInScale 0.5s ease-out;
        transition: background-color 0.3s ease, border-color 0.3s ease,
          color 0.3s ease;
      }
      body.dark-mode .submission-output {
        background-color: #1a2b3c;
        border-color: #b39ddb;
        color: #e0e0e0;
      }

      @keyframes fadeInScale {
        from {
          opacity: 0;
          transform: scale(0.98);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .submission-output h3 {
        font-family: "Lora", serif;
        color: #8b1e3f;
        font-size: 1.5rem;
        margin-bottom: 15px;
        border-bottom: 1px solid #cbd5e0;
        padding-bottom: 5px;
        transition: color 0.3s ease, border-color 0.3s ease;
      }
      body.dark-mode .submission-output h3 {
        color: #e0e0e0;
        border-bottom-color: #304055;
      }

      .submission-output pre {
        white-space: pre-wrap;
        word-break: break-word;
      }

      /* Styles for the footer text */
      .footer-text {
        text-align: center;
        margin-top: 40px;
        font-size: 0.85rem;
        color: #718096;
        transition: color 0.3s ease;
      }
      body.dark-mode .footer-text {
        color: #bdbdbd;
      }

      /* Styles for modal overlays and content */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }

      .modal-overlay.visible {
        visibility: visible;
        opacity: 1;
      }

      .modal-content {
        background-color: #ffffff;
        padding: 30px;
        border-radius: 8mm;
        text-align: center;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transform: scale(0.95);
        transition: transform 0.3s ease, background-color 0.3s ease;
      }
      body.dark-mode .modal-content {
        background-color: #1a2b3c;
      }

      .modal-overlay.visible .modal-content {
        transform: scale(1);
      }

      .modal-content h3 {
        font-family: "Lora", serif;
        color: #8b1e3f;
        font-size: 1.8rem;
        margin-bottom: 15px;
        font-weight: 700;
        transition: color 0.3s ease;
      }
      body.dark-mode .modal-content h3 {
        color: #e0e0e0;
      }

      .modal-content p {
        font-family: "Manrope", sans-serif;
        font-size: 1.1rem;
        margin-bottom: 20px;
        color: #4a5568;
        transition: color 0.3s ease;
      }
      body.dark-mode .modal-content p {
        color: #e0e0e0;
      }

      .modal-content ul {
        list-style: none;
        padding: 0;
        margin-bottom: 15px;
        text-align: left;
      }

      .modal-content ul li {
        font-family: "Manrope", sans-serif;
        margin-bottom: 5px;
        font-size: 1rem;
        color: #2d3748;
        transition: color 0.3s ease;
      }
      body.dark-mode .modal-content ul li {
        color: #e0e0e0;
      }

      /* Styles for modal buttons */
      .modal-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
      }

      .modal-button {
        padding: 10px 20px;
        border: none;
        border-radius: 4mm;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: background-color 0.2s ease, opacity 0.2s ease;
      }

      .modal-button.confirm {
        background-color: #8b1e3f;
        color: #ffffff;
      }

      .modal-button.confirm:hover {
        background-color: #6a1731;
      }

      .modal-button.cancel {
        background-color: #e2e8f0;
        color: #2d3748;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      .modal-button.cancel:hover {
        background-color: #cbd5e0;
      }
      body.dark-mode .modal-button.cancel {
        background-color: #607d8b;
        color: #e0e0e0;
      }
      body.dark-mode .modal-button.cancel:hover {
        background-color: #78909c;
      }

      /* Specific styles for the validation modal */
      .validation-modal-content h3 {
        color: #8b1e3f;
        font-weight: 700;
      }
      body.dark-mode .validation-modal-content h3 {
        color: #e0e0e0;
      }

      .validation-modal-content p {
        color: #2d3748;
      }
      body.dark-mode .validation-modal-content p {
        color: #e0e0e0;
      }

      .validation-modal-content .modal-button.ok {
        background-color: #8b1e3f;
        color: #ffffff;
      }

      .validation-modal-content .modal-button.ok:hover {
        background-color: #6a1731;
      }

      /* Dark mode specific styles */
      body.dark-mode {
        background-color: #0f1a2a;
        color: #e0e0e0;
      }

      body.dark-mode .left-column {
        background-color: #1a2b3c;
        border-right-color: #304055;
      }

      body.dark-mode .right-column {
        background-color: #1a2b3c;
      }

      body.dark-mode h1,
      body.dark-mode h2,
      body.dark-mode h3 {
        color: #e0e0e0;
      }

      body.dark-mode h2 {
        border-bottom-color: #304055;
      }

      body.dark-mode p {
        color: #e0e0e0;
      }

      body.dark-mode ul li {
        color: #e0e0e0;
      }

      body.dark-mode strong {
        color: #ffffff;
      }

      body.dark-mode .language-toggle {
        background-color: #1a2b3c;
        border-color: #304055;
      }

      body.dark-mode .language-button {
        color: #e0e0e0;
        border-right-color: #304055;
      }

      body.dark-mode .language-button:hover {
        background-color: #304055;
        color: #ffffff;
      }

      body.dark-mode .language-button.active {
        background-color: #8b1e3f;
        color: #ffffff;
      }

      body.dark-mode .dark-mode-button {
        background-color: #1a2b3c;
        color: #e0e0e0;
        border-color: #304055;
      }

      body.dark-mode .dark-mode-button:hover {
        background-color: #304055;
        color: #ffffff;
        border-color: #4a5568;
      }

      body.dark-mode .candidate-label {
        border-color: #304055;
        background-color: #1a2b3c;
        color: #e0e0e0;
      }

      body.dark-mode .candidate-label:hover {
        background-color: #304055;
      }

      body.dark-mode .key-issues-content {
        border-top-color: #304055;
      }

      body.dark-mode .papal-name-item {
        border-color: #304055;
        background-color: #1a2b3c;
        color: #e0e0e0;
      }

      body.dark-mode .papal-name-item:hover {
        background-color: #304055;
      }

      body.dark-mode .yourNameLabel {
        color: #e0e0e0;
      }

      body.dark-mode input[type="text"] {
        background-color: #0f1a2a;
        color: #e0e0e0;
        border-color: #e0e0e0;
      }
      body.dark-mode input[type="text"]::placeholder {
        color: #a0a0a0;
      }

      body.dark-mode label[for="playerName"] {
        color: #e0e0e0;
      }

      /* Responsive adjustments for different screen sizes */
      @media (max-width: 767px) {
        body {
          padding-top: 60px;
        }
        .container {
          grid-template-columns: 1fr;
          margin: 20px auto;
          border-radius: 0;
        }
        .left-column {
          border-right: none;
          border-bottom: 1px solid #e2e8f0;
          padding: 20px;
        }
        body.dark-mode .left-column {
          border-bottom-color: #304055;
        }
        .right-column {
          padding: 20px;
          padding-bottom: 150px;
          gap: 20px;
        }
        h1 {
          font-size: 2.8rem;
        }
        h2 {
          font-size: 1.6rem;
        }
        h3 {
          font-size: 1.1rem;
        }
        p {
          font-size: 0.9rem;
        }
        ul li {
          font-size: 0.9rem;
        }
        .candidate-grid {
          gap: 15px;
        }
        .candidate-label {
          padding: 15px;
          border-radius: 6mm;
        }
        .submit-button-container {
          padding: 10px 20px;
          flex-direction: column;
          gap: 10px;
        }
        .button-wrapper {
          flex-direction: column;
          gap: 10px;
        }
        .submit-button,
        .reset-button {
          padding: 12px 20px;
          font-size: 1rem;
          letter-spacing: 0.8px;
          border-radius: 4mm;
        }
        .selected-candidate {
          padding: 25px;
          font-size: 1.4rem;
          border-radius: 6mm;
        }
        .footer-text {
          margin-top: 30px;
          font-size: 0.85rem;
        }
        .key-issues-toggle {
          font-size: 0.9rem;
        }
        .key-issues-content ul li {
          font-size: 0.85rem;
        }
        .papal-name-list {
          grid-template-columns: 1fr;
        }
        .papal-name-item {
          padding: 8px 10px;
        }
        .language-toggle {
          top: 10px;
          right: 10px;
          gap: 0;
        }
        .language-button {
          padding: 6px 10px;
          font-size: 0.8rem;
        }
        .dark-mode-toggle {
          top: 10px;
          right: 100px;
        }
      }

      @media (min-width: 768px) {
        .container {
          grid-template-columns: minmax(auto, 400px) 1fr;
        }
        .left-column {
          border-right: 1px solid #e2e8f0;
          border-bottom: none;
        }
        body.dark-mode .left-column {
          border-right-color: #304055;
        }
        .right-column {
          padding-bottom: 120px;
        }
        .submit-button-container {
          flex-direction: column;
          gap: 15px;
        }
        .button-wrapper {
          flex-direction: row;
          gap: 20px;
        }
        .papal-name-list {
          grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }
      }
    </style>
  </head>
  <body>
    <div class="language-toggle">
      <button class="language-button active" data-lang="en">EN</button>
      <button class="language-button" data-lang="es">ES</button>
    </div>

    <div class="dark-mode-toggle">
      <button id="darkModeToggle" class="dark-mode-button">
        <span class="icon">游깿</span>
        <span data-translate="darkModeText">Dark Mode</span>
      </button>
    </div>

    <div class="container">
      <div class="left-column">
        <h1
          class="text-2xl font-semibold text-gray-800 mb-4"
          data-translate="mainTitle"
        >
          Fantasy Conclave Vote
        </h1>
        <p data-translate="introText1">
          Welcome to the Fantasy Conclave Vote! Cast your predictions for the
          next Pope and their chosen name.
        </p>
        <p data-translate="introText2">
          In Round 1, you will select *three* cardinals you believe are most
          likely to be elected. Your first pick is worth 5 points, your second 3
          points, and your third 1 point, *if* that cardinal is eventually
          elected.
        </p>
        <p data-translate="introText3">
          In Round 2, you will select 5 names from a list of historical papal
          names. If the elected cardinal chooses one of your names, you get 10
          points.
        </p>
      </div>
      <div class="right-column">
        <div class="mb-8">
          <label
            for="playerName"
            class="block text-lg font-semibold text-gray-700 mb-2 yourNameLabel"
            data-translate="yourNameLabel"
            >Your Name:</label
          >
          <input
            type="text"
            id="playerName"
            name="playerName"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            required
          />
        </div>

        <div class="mb-8 p-6 rounded-lg border border-gray-200 shadow-none">
          <h2
            class="text-2xl font-semibold text-gray-800 mb-4"
            data-translate="round1Title"
          >
            Round 1: Pick Your Papabili (Top 3)
          </h2>
          <p class="text-gray-600 mb-6" data-translate="round1Instructions">
            Click on the three cardinals you predict will be elected, in order
            of likelihood.
          </p>
          <ul class="list-disc list-inside text-gray-700 mb-6">
            <li data-translate="round1Points1">
              1st Pick (first click): 5 points
            </li>
            <li data-translate="round1Points2">
              2nd Pick (second click): 3 points
            </li>
            <li data-translate="round1Points3">
              3rd Pick (third click): 1 point
            </li>
          </ul>
          <p class="text-sm text-gray-500 mb-6" data-translate="round1Deselect">
            Click a selected cardinal again to deselect them.
          </p>

          <form id="cardinalForm" aria-label="Cardinal Selection Form">
            <div class="candidate-grid" id="candidateGrid"></div>
          </form>
        </div>

        <div class="mb-8 p-6 rounded-lg border border-gray-200 shadow-none">
          <h2
            class="text-2xl font-semibold text-gray-800 mb-4"
            data-translate="round2Title"
          >
            Round 2: Pick Your Papal Names
          </h2>
          <p class="text-gray-600 mb-6" data-translate="round2Instructions">
            Select 5 names from the list below. If the eventual Pope chooses one
            of your names, you get 10 points.
          </p>

          <ul class="papal-name-list" id="papalNameList"></ul>
          <p class="text-sm text-gray-500 mt-4" data-translate="round2Note">
            Note: It includes Popes and Antipopes names.
          </p>
        </div>

        <div class="text-center mt-8 submit-button-container">
          <div class="button-wrapper">
            <button
              id="submitBtn"
              class="submit-button"
              data-translate="submitButton"
            >
              Submit Your Picks
            </button>
            <button
              id="resetBallotButton"
              class="reset-button"
              data-translate="resetButton"
            >
              Reset Ballot
            </button>
          </div>
        </div>

        <div
          id="submissionOutput"
          class="mt-8 p-6 bg-yellow-50 rounded-lg border border-yellow-200 hidden submission-output"
        >
          <h3 data-translate="submissionOutputTitle">Your Submission:</h3>
          <pre id="outputContent"></pre>
        </div>
        <p class="footer-text text-gray-700 mt-8" data-translate="footerText">
          May your chosen candidate be guided by divine wisdom.
        </p>
      </div>
    </div>

    <div id="confirmationModalOverlay" class="modal-overlay">
      <div class="modal-content">
        <h3 data-translate="confirmModalTitle">Confirm Your Selection</h3>
        <p data-translate="confirmModalPicksLabel">You have selected:</p>
        <ul id="modalCardinalPicks" class="text-left mb-4"></ul>
        <p data-translate="confirmModalNamesLabel">
          And the following Papal Names:
        </p>
        <ul id="modalPapalNamePicks" class="text-left mb-4"></ul>
        <div class="modal-buttons">
          <button
            id="confirmSubmitButton"
            class="modal-button confirm"
            data-translate="confirmButton"
          >
            Confirm
          </button>
          <button
            id="cancelSubmitButton"
            class="modal-button cancel"
            data-translate="cancelButton"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div id="validationModalOverlay" class="modal-overlay">
      <div class="modal-content validation-modal-content">
        <h3 data-translate="validationModalTitle">Validation Error</h3>
        <p id="validationModalMessage"></p>
        <div class="modal-buttons">
          <button
            id="validationModalOkButton"
            class="modal-button ok"
            data-translate="okButton"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <script>
      /*
      =========================================================================
      JavaScript Logic
      This section contains the JavaScript code to handle interactivity,
      language switching, dark mode toggling, form validation, data
      management, rendering lists, and interacting with modal dialogs.
      =========================================================================
      */

      // Translations object containing text for different languages
      const translations = {
        en: {
          pageTitle: "Fantasy Conclave Vote",
          mainTitle: "Fantasy Conclave Vote",
          introText1:
            "Welcome to the Fantasy Conclave Vote! Cast your predictions for the next Pope and their chosen name.",
          introText2:
            "In Round 1, you will select *three* cardinals you believe are most likely to be elected. Your first pick is worth 5 points, your second 3 points, and your third 1 point, *if* that cardinal is eventually elected.",
          introText3:
            "In Round 2, you will select 5 names from a list of historical papal names. If the elected cardinal chooses one of your names, you get 10 points.",
          yourNameLabel: "Your Name:",
          round1Title: "Round 1: Pick Your Papabili (Top 3)",
          round1Instructions:
            "Click on the three cardinals you predict will be elected, in order of likelihood.",
          round1Points1: "1st Pick (first click): 5 points",
          round1Points2: "2nd Pick (second click): 3 points",
          round1Points3: "3rd Pick (third click): 1 point",
          round1Deselect: "Click a selected cardinal again to deselect them.",
          round2Title: "Round 2: Pick Your Papal Names",
          round2Instructions:
            "Select 5 names from the list below. If the eventual Pope chooses one of your names, you get 10 points.",
          round2Note: "Note: It includes Popes and Antipopes names.",
          submitButton: "Submit Your Picks",
          submissionOutputTitle: "Your Submission:",
          footerText: "May your chosen candidate be guided by divine wisdom.",
          confirmModalTitle: "Ready to Submit Your Ballot?",
          confirmModalPicksLabel:
            "You are about to submit the following cardinal picks:",
          confirmModalNamesLabel: "And these chosen papal names:",
          confirmButton: "Yes, Submit!",
          cancelButton: "Hold On, Let Me Check",
          resetButton: "Reset Ballot",
          leaningLabel: "Leaning:",
          keyIssuesLabel: "Key Issues:",
          clickToExpand: "(Click to expand)",
          clickToCollapse: "(Click to collapse)",
          synodalIssue: "Synodal Way:",
          womenIssue: "Women's Role:",
          sameSexIssue: "Same-Sex:",
          humanaeIssue: "Humanae Vitae:",
          marriageIssue: "Marriage:",
          stanceNotAvailable: "(Specific stance not readily available)",
          usedTimes: "Used {count} times",
          playerNameAlert: "Oops! Please enter your name before submitting.",
          round1LimitAlert:
            "Almost there! Please select exactly 3 cardinals for Round 1.",
          round2LimitAlert:
            "Just a few more! Please select exactly 5 papal names for Round 2.",
          submissionSuccessAlert:
            "Success! Your picks have been recorded. Good luck!",
          resetModalTitle: "Confirm Reset",
          resetModalMessage:
            "Are you sure you want to reset your ballot? This will clear all your current selections.",
          resetButtonOK: "Yes, Reset",
          resetButtonCancel: "No, Keep My Picks",
          validationModalTitle: "Just a heads-up!",
          okButton: "Got it!",
          darkMode: "Dark Mode",
          lightMode: "Light Mode",
        },
        es: {
          pageTitle: "Voto del C칩nclave Fant치stico",
          mainTitle: "Voto del C칩nclave Fant치stico",
          introText1:
            "춰Bienvenido al Voto del C칩nclave Fant치stico! Emite tus predicciones para el pr칩ximo Papa y el nombre que elegir치.",
          introText2:
            "En la Ronda 1, seleccionar치s *tres* cardenales que crees que tienen m치s probabilidades de ser elegidos. Tu primera elecci칩n vale 5 puntos, la segunda 3 puntos y la tercera 1 punto, *si* ese cardenal es finalmente elegido.",
          introText3:
            "En la Ronda 2, seleccionar치s 5 nombres de una lista de nombres papales hist칩ricos. Si el cardenal elegido elige uno de tus nombres, obtendr치s 10 puntos.",
          yourNameLabel: "Tu nombre:",
          round1Title: "Ronda 1: Elige a tus papables (Top 3)",
          round1Instructions:
            "Haz clic en los tres cardenales que predices que ser치n elegidos, en orden de probabilidad.",
          round1Points1: "1춹 Elecci칩n (primer clic): 5 puntos",
          round1Points2: "2춹 Elecci칩n (segundo clic): 3 puntos",
          round1Points3: "3춹 Elecci칩n (tercer clic): 1 punto",
          round1Deselect:
            "Haz clic de nuevo en un cardenal seleccionado para deseleccionarlo.",
          round2Title: "Ronda 2: Elige tus nombres papales",
          round2Instructions:
            "Selecciona 5 nombres de la lista a continuaci칩n. Si el eventual Papa elige uno de tus nombres, obtendr치s 10 puntos.",
          round2Note: "Nota: Est치n incluidos los nombres de Papas y Antipapas.",
          submitButton: "Enviar mis elecciones",
          submissionOutputTitle: "Tu env칤o:",
          footerText:
            "Que tu candidato elegido sea guiado por la sabidur칤a divina.",
          confirmModalTitle: "쯃isto para enviar tu boleta?",
          confirmModalPicksLabel:
            "Est치s a punto de enviar las siguientes elecciones de cardenales:",
          confirmModalNamesLabel: "Y estos nombres papales elegidos:",
          confirmButton: "춰S칤, enviar!",
          cancelButton: "Espera, d칠jame revisar",
          resetButton: "Reiniciar boleta",
          leaningLabel: "Postura percibida:",
          keyIssuesLabel: "Temas clave:",
          clickToExpand: "(Haz clic para expandir)",
          clickToCollapse: "(Haz clic para contraer)",
          synodalIssue: "Camino Sinodal:",
          womenIssue: "Rol de la Mujer:",
          sameSexIssue: "Relaciones del mismo sexo:",
          humanaeIssue: "Humanae Vitae:",
          marriageIssue: "Divorcio:",
          stanceNotAvailable: "(Postura espec칤fica no disponible)",
          usedTimes: "Usado {count} veces",
          playerNameAlert:
            "춰Uy! Por favor, introduce tu nombre antes de enviar.",
          round1LimitAlert:
            "춰Casi listo! Por favor, selecciona exactamente 3 cardenales para la Ronda 1.",
          round2LimitAlert:
            "춰Solo un poco m치s! Por favor, selecciona exactamente 5 nombres papales para la Ronda 2.",
          submissionSuccessAlert:
            "춰칄xito! Tus elecciones han sido registradas. 춰Buena suerte!",
          resetModalTitle: "Confirmar reinicio",
          resetModalMessage:
            "쮼st치s seguro de que quieres reiniciar tu boleta? Esto borrar치 todas tus selecciones actuales.",
          resetButtonOK: "S칤, reiniciar",
          resetButtonCancel: "No, mantener mis elecciones",
          validationModalTitle: "춰Solo un aviso!",
          okButton: "춰Entendido!",
          darkMode: "Modo oscuro",
          lightMode: "Modo claro",
        },
      };

      // Current language state variable
      let currentLang = "en"; // Default language

      // Data for cardinals and papal names
      const cardinals = [
        {
          id: "cardinal_ambongo",
          name: {
            en: "Cardinal Fridolin Ambongo Besungu",
            es: "Cardenal Fridolin Ambongo Besungu",
          },
          flag: "游뻟릖",
          age: 65,
          role: {
            en: "Archbishop of Kinshasa. President of SECAM. Member of the Council of Cardinals.",
            es: "Arzobispo de Kinshasa. Presidente de SECAM. Miembro del Consejo de Cardenales.",
          },
          country: {
            en: "Democratic Republic of Congo",
            es: "Rep칰blica Democr치tica del Congo",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            women: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            sameSex: {
              en: 'Opposes blessings for same-sex marriage, stating they are "contradictory to cultural norms and intrinsically evil".',
              es: 'Se opone a las bendiciones para el matrimonio entre personas del mismo sexo, afirmando que son "contradictorias a las normas culturales e intr칤nsecamente malas".',
            },
            humanae: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            marriage: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
          },
          leaning: {
            en: "Culturally Conservative.",
            es: "Culturalmente Conservador.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FF5733/ffffff?text=Ambongo", // Different placeholder
        },
        {
          id: "cardinal_arborelius",
          name: {
            en: "Cardinal Anders Arborelius",
            es: "Cardenal Anders Arborelius",
          },
          flag: "游젏릖",
          age: 75,
          role: {
            en: "Bishop of Stockholm. First Swedish cardinal.",
            es: "Obispo de Estocolmo. Primer cardenal sueco.", // Corrected 'Estocolm' to 'Estocolmo'
          },
          country: {
            en: "Sweden",
            es: "Suecia",
          },
          keyIssues: {
            synodal: {
              en: "Critical of the German Synodal Way.",
              es: "Cr칤tico del Camino Sinodal alem치n.",
            },
            women: {
              en: "Opposes women's ordination/deacons.",
              es: "Se opone a la ordenaci칩n/diaconado de mujeres.",
            },
            sameSex: {
              en: "Opposes same-sex blessings.",
              es: "Se opone a las bendiciones para personas del mismo sexo.",
            },
            humanae: {
              en: "Orthodox on doctrine (implies upholding).",
              es: "Ortodoxo en doctrina (implica defenderla).",
            },
            marriage: {
              en: "Orthodox on doctrine (implies upholding traditional teaching).",
              es: "Ortodoxo en doctrina (implica defender la ense침anza tradicional).",
            },
          },
          leaning: {
            en: "Orthodox on doctrine, supports Francis on migration/environment.",
            es: "Ortodoxo en doctrina, apoya a Francisco en migraci칩n/medio ambiente.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl:
            "https://placehold.co/100x100/33FF57/ffffff?text=Arborelius", // Different placeholder
        },
        {
          id: "cardinal_aveline",
          name: {
            en: "Cardinal Jean-Marc Aveline",
            es: "Cardenal Jean-Marc Aveline",
          },
          flag: "游游",
          age: 66,
          role: {
            en: "Archbishop of Marseille.",
            es: "Arzobispo de Marsella.",
          },
          country: {
            en: "France",
            es: "Francia",
          },
          keyIssues: {
            synodal: {
              en: "Elected member of the Ordinary Council of the General Secretariat of the Synod of Bishops (indicates involvement).",
              es: "Miembro electo del Consejo Ordinario de la Secretar칤a General del S칤nodo de los Obispos (indica participaci칩n).",
            },
            women: {
              en: "Openness to women deacons mentioned (requires verification).",
              es: "Mencionada apertura al diaconado femenino (requiere verificaci칩n).",
            },
            sameSex: {
              en: "Ambiguous stance on blessing same-sex couples mentioned (requires verification).",
              es: "Mencionada postura ambigua sobre la bendici칩n de parejas del mismo sexo (requiere verificaci칩n).",
            },
            humanae: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            marriage: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
          },
          leaning: {
            en: "Seen as liberal/progressive, inclined to consensus, close to Pope Francis.",
            es: "Visto como liberal/progresista, inclinado al consenso, cercano al Papa Francisco.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/5733FF/ffffff?text=Aveline", // Different placeholder
        },
        {
          id: "cardinal_bagnasco",
          name: {
            en: "Cardinal Angelo Bagnasco",
            es: "Cardenal Angelo Bagnasco",
          },
          flag: "游쉻릖",
          age: 82, // Not eligible to vote
          role: {
            en: "Archbishop Emeritus of Genoa. Formerly President of the Italian Episcopal Conference.",
            es: "Arzobispo Em칠rito de G칠nova. Anteriormente Presidente de la Conferencia Episcopal Italiana.",
          },
          country: {
            en: "Italy",
            es: "Italia",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            women: {
              en: "Opposes ordaining women as deacons.",
              es: "Se opone a ordenar mujeres como di치conos.",
            },
            sameSex: {
              en: "Strong opposition to gay rights and same-sex unions.",
              es: "Fuerte oposici칩n a los derechos homosexuales y uniones del mismo sexo.",
            },
            humanae: {
              en: "Strong opposition to abortion (implies upholding).",
              es: "Fuerte oposici칩n al aborto (implica defenderla).",
            },
            marriage: {
              en: "(Specific stance not readily available, but generally conservative).",
              es: "(Postura espec칤fica no disponible, pero generalmente conservador).", // Corrected 'but' to 'pero'
            },
          },
          leaning: {
            en: "Conservative.",
            es: "Conservador.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FF33A1/ffffff?text=Bagnasco", // Different placeholder
        },
        {
          id: "cardinal_bo",
          name: {
            en: "Cardinal Charles Maung Bo",
            es: "Cardenal Charles Maung Bo",
          },
          flag: "游쓇릖",
          age: 76,
          role: {
            en: "Archbishop of Yangon. President of FABC.",
            es: "Arzobispo de Yangon. Presidente de FABC.",
          },
          country: {
            en: "Myanmar",
            es: "Myanmar",
          },
          keyIssues: {
            synodal: {
              en: "Endorsed Francis' Synod on Synodality.",
              es: "Respald칩 el S칤nodo sobre la Sinodalidad de Francisco.",
            },
            women: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            sameSex: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            humanae: {
              en: "Defends the Catholic Church's opposition to abortion and contraception.",
              es: "Defiende la oposici칩n de la Iglesia Cat칩lica al aborto y la anticoncepci칩n.",
            },
            marriage: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
          },
          leaning: {
            en: "Generally aligned with Pope Francis on social justice and dialogue.",
            es: "Generalmente alineado con el Papa Francisco en justicia social y di치logo.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/33A1FF/ffffff?text=Bo", // Different placeholder
        },
        {
          id: "cardinal_brislin",
          name: {
            en: "Cardinal Stephen Brislin",
            es: "Cardenal Stephen Brislin",
          },
          flag: "游游",
          age: 68,
          role: {
            en: "Archbishop of Johannesburg. Formerly Archbishop of Cape Town.",
            es: "Arzobispo de Johannesburgo. Anteriormente Arzobispo de Ciudad del Cabo.",
          },
          country: {
            en: "South Africa",
            es: "Sud치frica",
          },
          keyIssues: {
            synodal: {
              en: "Contribution mentioned embracing change while holding tradition.",
              es: "Mencionada contribuci칩n que abraza el cambio manteniendo la tradici칩n.",
            },
            women: {
              en: "Reaffirmed prohibition against women's ordination but allowed a dissident group supporting women priests in his diocese.",
              es: "Reafirm칩 la prohibici칩n contra la ordenaci칩n de mujeres pero permiti칩 un grupo disidente que apoya a mujeres sacerdotes en su di칩cesis.", // Corrected 'but' to 'pero'
            },
            sameSex: {
              en: "Supported <em>Fiducia Supplicans</em>, emphasizing the union isn't blessed and chastity.",
              es: "Apoy칩 <em>Fiducia Supplicans</em>, enfatizando que la uni칩n no es bendecida y la castidad.",
            },
            humanae: {
              en: "(Specific stance not readily available, but addresses social issues with a 'seamless garment' approach).",
              es: "(Postura espec칤fica no disponible, pero aborda temas sociales con un enfoque de 'tejido sin costuras').", // Corrected 'but' to 'pero'
            },
            marriage: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
          },
          leaning: {
            en: "Seen on the classically liberal wing, committed to social issues.",
            es: "Visto en el ala cl치sicamente liberal, comprometido con los temas sociales.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/AA33FF/ffffff?text=Brislin", // Different placeholder
        },
        {
          id: "cardinal_burke",
          name: {
            en: "Cardinal Raymond Leo Burke",
            es: "Cardenal Raymond Leo Burke",
          },
          flag: "游쥟릖",
          age: 76,
          role: {
            en: "Cardinal Patron Emeritus of the Sovereign Military Order of Malta. Formerly Prefect of the Apostolic Signatura.",
            es: "Cardenal Patrono Em칠rito de la Soberana Orden Militar de Malta. Anteriormente Prefecto de la Signatura Apost칩lica.",
          },
          country: {
            en: "USA",
            es: "EE. UU.",
          },
          keyIssues: {
            synodal: {
              en: "Generally critical of perceived deviations from tradition.",
              es: "Generalmente cr칤tico de las desviaciones percibidas de la tradici칩n.",
            },
            women: {
              en: "Hard line against changes to the role of women.",
              es: "L칤nea dura contra los cambios en el papel de la mujer.",
            },
            sameSex: {
              en: "Hard line against softening policy towards LGBTQ people.",
              es: "L칤nea dura contra la flexibilizaci칩n de la pol칤tica hacia las personas LGBTQ.",
            },
            humanae: {
              en: "Strong defender of traditional doctrine (implies upholding).",
              es: "Firme defensor de la doctrina tradicional (implica defenderla).",
            },
            marriage: {
              en: "Hard line against relaxing attitudes towards divorced and remarried receiving communion.",
              es: "L칤nea dura contra la relajaci칩n de las actitudes hacia los divorciados y vueltos a casar que reciben la comuni칩n.",
            },
          },
          leaning: {
            en: "Highly Conservative/Traditionalist.",
            es: "Altamente Conservador/Tradicionalista.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FF3333/ffffff?text=Burke", // Different placeholder
        },
        {
          id: "cardinal_eijk",
          name: {
            en: "Cardinal Willem Jacobus Eijk",
            es: "Cardenal Willem Jacobus Eijk",
          },
          flag: "游游",
          age: 71,
          role: {
            en: "Archbishop of Utrecht.",
            es: "Arzobispo de Utrecht.",
          },
          country: {
            en: "Netherlands",
            es: "Pa칤ses Bajos",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available, but generally conservative).",
              es: "(Postura espec칤fica no disponible, pero generalmente conservador).", // Corrected 'but' to 'pero'
            },
            women: {
              en: "(Specific stance not readily available, but generally conservative).",
              es: "(Postura espec칤fica no disponible, pero generalmente conservador).", // Corrected 'but' to 'pero'
            },
            sameSex: {
              en: "(Specific stance not readily available, but generally conservative).",
              es: "(Postura espec칤fica no disponible, pero generalmente conservador).", // Corrected 'but' to 'pero'
            },
            humanae: {
              en: "(Specific stance not readily available, but generally conservative).",
              es: "(Postura espec칤fica no disponible, pero generalmente conservador).", // Corrected 'but' to 'pero'
            },
            marriage: {
              en: "(Specific stance not readily available, but generally conservative).",
              es: "(Postura espec칤fica no disponible, pero generalmente conservador).", // Corrected 'but' to 'pero'
            },
          },
          leaning: {
            en: "Conservative.",
            es: "Conservador.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/33FFD1/ffffff?text=Eijk", // Different placeholder
        },
        {
          id: "cardinal_erdo",
          name: {
            en: "Cardinal P칠ter Erd콈",
            es: "Cardenal P칠ter Erd콈",
          },
          flag: "游쇓릖",
          age: 72,
          role: {
            en: "Archbishop of Esztergom-Budapest. Primate of Hungary. Canon lawyer.",
            es: "Arzobispo de Esztergom-Budapest. Primado de Hungr칤a. Canonista.",
          },
          country: {
            en: "Hungary",
            es: "Hungr칤a",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available, but focus on canon law might suggest caution).",
              es: "(Postura espec칤fica no disponible, pero el enfoque en el derecho can칩nico podr칤a sugerir cautela).", // Corrected 'but' to 'pero'
            },
            women: {
              en: "Opposed to ordaining women as deacons.",
              es: "Opuesto a ordenar mujeres como di치conos.",
            },
            sameSex: {
              en: "Firmly against the acceptance of homosexual unions, but favors pastoral support.",
              es: "Firmemente en contra de la aceptaci칩n de uniones homosexuales, pero favorece el apoyo pastoral.", // Corrected 'but' to 'pero'
            },
            humanae: {
              en: "Strongly pro-life (implies upholding Humanae Vitae).",
              es: "Fuertemente pro-vida (implica defender Humanae Vitae).",
            },
            marriage: {
              en: "Against divorced Catholics receiving communion, in favor of pastoral accompaniment only if indissolubility is clear.",
              es: "En contra de que los cat칩licos divorciados reciban la comuni칩n, a favor del acompa침amiento pastoral solo si la indisolubilidad es clara.",
            },
          },
          leaning: {
            en: "Seen as a staunch conservative, but pragmatic.",
            es: "Visto como un conservador ac칠rrimo, pero pragm치tico.", // Corrected 'but' to 'pero'
          },
          createdBy: {
            en: "Pope John Paul II",
            es: "Papa Juan Pablo II", // Corrected 'Juan Paul II'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FFC300/ffffff?text=Erdo", // Different placeholder
        },
        {
          id: "cardinal_filoni",
          name: {
            en: "Cardinal Fernando Filoni",
            es: "Cardenal Fernando Filoni",
          },
          flag: "游쉻릖",
          age: 79,
          role: {
            en: "Grand Master of the Equestrian Order of the Holy Sepulchre of Jerusalem. Formerly Prefect of the Congregation for the Evangelization of Peoples.",
            es: "Gran Maestre de la Orden Ecuestre del Santo Sepulcro de Jerusal칠n. Anteriormente Prefecto de la Congregaci칩n para la Evangelizaci칩n de los Pueblos.",
          },
          country: {
            en: "Italy",
            es: "Italia",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            women: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            sameSex: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            humanae: {
              en: "Orthodox understanding of sacraments and Church mission (implies upholding traditional teaching).",
              es: "Comprensi칩n ortodoxa de los sacramentos y la misi칩n de la Iglesia (implica defender la ense침anza tradicional).",
            },
            marriage: {
              en: "Orthodox understanding of sacraments and Church mission (implies upholding traditional teaching).",
              es: "Comprensi칩n ortodoxa de los sacramentos y la misi칩n de la Iglesia (implica defender la ense침anza tradicional).",
            },
          },
          leaning: {
            en: "Generally seen as orthodox, with extensive diplomatic and Curia experience.",
            es: "Generalmente visto como ortodoxo, con amplia experiencia diplom치tica y en la Curia.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/C70039/ffffff?text=Filoni", // Different placeholder
        },
        {
          id: "cardinal_koch",
          name: {
            en: "Cardinal Kurt Koch",
            es: "Cardenal Kurt Koch",
          },
          flag: "游뻟릖",
          age: 75,
          role: {
            en: "Prefect of the Dicastery for Promoting Christian Unity.",
            es: "Prefecto del Dicasterio para la Promoci칩n de la Unidad de los Cristianos.",
          },
          country: {
            en: "Switzerland",
            es: "Suiza",
          },
          keyIssues: {
            synodal: {
              en: "Sees synodality as having an old tradition, believes primacy must be exercised synodally.",
              es: "Ve la sinodalidad como una tradici칩n antigua, cree que el primado debe ejercerse sinodalmente.",
            },
            women: {
              en: 'Previously said female priesthood is "desirable" but later stated sacramental priesthood is linked to the male sex.',
              es: 'Anteriormente dijo que el sacerdocio femenino es "deseable" pero luego afirm칩 que el sacerdocio sacramental est치 ligado al sexo masculino.', // Corrected 'but' to 'pero'
            },
            sameSex: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            humanae: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            marriage: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
          },
          leaning: {
            en: "Diplomatic and pragmatic, with a 'healthy conservatism' in the Curia.",
            es: "Diplom치tico y pragm치tico, con un 'sano conservadurismo' en la Curia.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/900C3F/ffffff?text=Koch", // Different placeholder
        },
        {
          id: "cardinal_mendonca",
          name: {
            en: "Cardinal Jos칠 Tolentino de Mendon칞a",
            es: "Cardenal Jos칠 Tolentino de Mendon칞a",
          },
          flag: "游왫릖",
          age: 59,
          role: {
            en: "Prefect of the Dicastery for Culture and Education. Archivist and Librarian of the Holy Roman Church.",
            es: "Prefecto del Dicasterio para la Cultura y la Educaci칩n. Archivero y Bibliotecario de la Santa Iglesia Romana.",
          },
          country: {
            en: "Portugal",
            es: "Portugal",
          },
          keyIssues: {
            synodal: {
              en: "Views on synodality mentioned, likely supportive.",
              es: "Mencionadas opiniones sobre la sinodalidad, probablemente de apoyo.",
            },
            women: {
              en: "Allying with a feminist sister who promotes women's ordination mentioned (seen as engaging with culture).",
              es: "Mencionada alianza con una hermana feminista que promueve la ordenaci칩n de mujeres (visto como compromiso con la cultura).",
            },
            sameSex: {
              en: 'Sympathizing with "tolerant approaches to homosexuality" mentioned, but reportedly not publicly against Church teaching.',
              es: 'Mencionada simpat칤a con "enfoques tolerantes hacia la homosexualidad", pero seg칰n se informa, no p칰blicamente en contra de la ense침anza de la Iglesia.', // Corrected 'but' to 'pero'
            },
            humanae: {
              en: "Allying with a sister who promotes abortion mentioned (seen as engaging with culture).",
              es: "Mencionada alianza con una hermana que promueve el aborto (visto como compromiso con la cultura).",
            },
            marriage: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
          },
          leaning: {
            en: "Progressive, close affinity to Pope Francis, 'significant modernist figure.'",
            es: "Progresista, gran afinidad con el Papa Francisco, 'figura modernista significativa'.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/581845/ffffff?text=Mendonca", // Different placeholder
        },
        {
          id: "cardinal_muller",
          name: {
            en: "Cardinal Gerhard Ludwig M칲ller",
            es: "Cardenal Gerhard Ludwig M칲ller",
          },
          flag: "游뾇릖",
          age: 77,
          role: {
            en: "Prefect Emeritus of the Congregation for the Doctrine of the Faith.",
            es: "Prefecto Em칠rito de la Congregaci칩n para la Doctrina de la Fe.",
          },
          country: {
            en: "Germany",
            es: "Alemania",
          },
          keyIssues: {
            synodal: {
              en: "Critical of perceived deviations from tradition.",
              es: "Cr칤tico de las desviaciones percibidas de la tradici칩n.",
            },
            women: {
              en: "Staunchly opposed to a female diaconate.",
              es: "Firmemente opuesto a un diaconado femenino.",
            },
            sameSex: {
              en: "Strong defender of traditional doctrine (implies opposition).",
              es: "Firme defensor de la doctrina tradicional (implica oposici칩n).",
            },
            humanae: {
              en: "Strong defender of traditional doctrine (implies upholding).",
              es: "Firme defensor de la doctrina tradicional (implica defenderla).",
            },
            marriage: {
              en: "Strong defender of traditional doctrine on marriage. Resists changes to priestly celibacy.",
              es: "Firme defensor de la doctrina tradicional sobre el matrimonio. Se resiste a los cambios en el celibato sacerdotal.",
            },
          },
          leaning: {
            en: "Theologically orthodox, strong defender of tradition.",
            es: "Teol칩gicamente ortodoxo, firme defensor de la tradici칩n.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FF0000/ffffff?text=Muller", // Different placeholder
        },
        {
          id: "cardinal_ouellet",
          name: {
            en: "Cardinal Marc Ouellet",
            es: "Cardenal Marc Ouellet",
          },
          flag: "游뻟릖",
          age: 80, // Not eligible to vote
          role: {
            en: "Prefect Emeritus of the Dicastery for Bishops.",
            es: "Prefecto Em칠rito del Dicasterio para los Obispos.",
          },
          country: {
            en: "Canada",
            es: "Canad치",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available, but traditional background).",
              es: "(Postura espec칤fica no disponible, pero antecedentes tradicionales).", // Corrected 'but' to 'pero'
            },
            women: {
              en: "(Specific stance not readily available, but traditional background).",
              es: "(Postura espec칤fica no disponible, pero antecedentes tradicionales).", // Corrected 'but' to 'pero'
            },
            sameSex: {
              en: "(Specific stance not readily available, but traditional background).",
              es: "(Postura espec칤fica no disponible, pero antecedentes tradicionales).", // Corrected 'but' to 'pero'
            },
            humanae: {
              en: "(Specific stance not readily available, but traditional background).",
              es: "(Postura espec칤fica no disponible, pero antecedentes tradicionales).", // Corrected 'but' to 'pero'
            },
            marriage: {
              en: "(Specific stance not readily available, but traditional background).",
              es: "(Postura espec칤fica no disponible, pero antecedentes tradicionales).", // Corrected 'but' to 'pero'
            },
          },
          leaning: {
            en: "Traditional theological background, extensive Curia experience.",
            es: "Antecedentes teol칩gicos tradicionales, amplia experiencia en la Curia.",
          },
          createdBy: {
            en: "Pope John Paul II",
            es: "Papa Juan Pablo II", // Corrected 'Juan Pablo II'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/00FF00/ffffff?text=Ouellet", // Different placeholder
        },
        {
          id: "cardinal_parolin",
          name: {
            en: "Cardinal Pietro Parolin",
            es: "Cardenal Pietro Parolin",
          },
          flag: "游쉻릖",
          age: 70,
          role: {
            en: "Vatican Secretary of State.",
            es: "Secretario de Estado del Vaticano.",
          },
          country: {
            en: "Italy",
            es: "Italia",
          },
          keyIssues: {
            synodal: {
              en: "(Role implies involvement in implementation, personal stance diplomatic).",
              es: "(El rol implica participaci칩n en la implementaci칩n, postura personal diplom치tica).",
            },
            women: {
              en: "(Specific stance not readily available, generally diplomatic).",
              es: "(Postura espec칤fica no disponible, generalmente diplom치tica).",
            },
            sameSex: {
              en: "(Specific stance not readily available, generally diplomatic).",
              es: "(Postura espec칤fica no disponible, generalmente diplom치tica).",
            },
            humanae: {
              en: "(Specific stance not readily available, generally diplomatic).",
              es: "(Postura espec칤fica no disponible, generalmente diplom치tica).",
            },
            marriage: {
              en: "(Specific stance not readily available, generally diplomatic).",
              es: "(Postura espec칤fica no disponible, generalmente diplom치tica).",
            },
          },
          leaning: {
            en: "Moderate, pragmatic, focused on stability and governance.",
            es: "Moderado, pragm치tico, centrado en la estabilidad y la gobernanza.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/0000FF/ffffff?text=Parolin", // Different placeholder
        },
        {
          id: "cardinal_piacenza",
          name: {
            en: "Cardinal Mauro Piacenza",
            es: "Cardenal Mauro Piacenza",
          },
          flag: "游쉻릖",
          age: 80, // Not eligible to vote
          role: {
            en: "Major Penitentiary Emeritus of the Apostolic Penitentiary.",
            es: "Penitenciario Mayor Em칠rito de la Penitenciar칤a Apost칩lica.",
          },
          country: {
            en: "Italy",
            es: "Italia",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            women: {
              en: "Firm in opposition to changing the celibacy rule (implies opposition to women's ordination).",
              es: "Firme en oposici칩n a cambiar la regla del celibato (implica oposici칩n a la ordenaci칩n de mujeres).",
            },
            sameSex: {
              en: "Holds fast to all doctrines on moral matters (implies opposition).",
              es: "Se mantiene firme en todas las doctrinas sobre asuntos morales (implica oposici칩n).",
            },
            humanae: {
              en: "Holds fast to all doctrines on moral matters (implies upholding).",
              es: "Se mantiene firme en todas las doctrinas sobre asuntos morales (implica defenderla).",
            },
            marriage: {
              en: "Holds fast to all doctrines on moral matters (implies upholding traditional teaching).",
              es: "Se mantiene firme en todas las doctrinas sobre asuntos morales (implica defender la ense침anza tradicional).",
            },
          },
          leaning: {
            en: "Conservative, focused on priestly formation and tradition.",
            es: "Conservador, centrado en la formaci칩n sacerdotal y la tradici칩n.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FFFF00/000000?text=Piacenza", // Different placeholder
        },
        {
          id: "cardinal_pizzaballa",
          name: {
            en: "Cardinal Pierbattista Pizzaballa",
            es: "Cardenal Pierbattista Pizzaballa",
          },
          flag: "游쉻릖",
          age: 60,
          role: {
            en: "Latin Patriarch of Jerusalem.",
            es: "Patriarca Latino de Jerusal칠n.",
          },
          country: {
            en: "Italy (serves in Jerusalem)",
            es: "Italia (sirve en Jerusal칠n)",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible).", // Added period for consistency
            },
            women: {
              en: "Desires a greater role for women in the Church.",
              es: "Desea un mayor papel para las mujeres en la Iglesia.",
            },
            sameSex: {
              en: "Opposed to the blessing of same-sex couples.",
              es: "Opuesto a la bendici칩n de parejas del mismo sexo.",
            },
            humanae: {
              en: "(Specific stance not readily available).",
              es: "(Postura espec칤fica no disponible).",
            },
            marriage: {
              en: "Opposed to the readmission of divorcees to the sacraments.",
              es: "Opuesto a la readmisi칩n de divorciados a los sacramentos.",
            },
          },
          leaning: {
            en: "Orthodox on some moral issues, open to Francis' reform agenda and pastoral approach.",
            es: "Ortodoxo en algunos temas morales, abierto a la agenda de reforma y enfoque pastoral de Francisco.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl:
            "https://placehold.co/100x100/FF00FF/ffffff?text=Pizzaballa", // Different placeholder
        },
        {
          id: "cardinal_ranjith",
          name: {
            en: "Cardinal Albert Malcolm Ranjith Patabendige Don",
            es: "Cardenal Albert Malcolm Ranjith Patabendige Don",
          },
          flag: "游쐟릖",
          age: 77,
          role: {
            en: "Archbishop of Colombo.",
            es: "Arzobispo de Colombo.",
          },
          country: {
            en: "Sri Lanka",
            es: "Sri Lanka",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            women: {
              en: "(Specific stance not readily available, but traditional approach to practice).",
              es: "(Postura espec칤fica no disponible, pero enfoque tradicional a la pr치ctica).", // Corrected 'but' to 'pero'
            },
            sameSex: {
              en: "Takes an uncompromising view, upholding Church teaching.",
              es: "Adopta una visi칩n intransigente, defendiendo la ense침anza de la Iglesia.",
            },
            humanae: {
              en: "Takes an uncompromising view on life issues, firmly upholding.",
              es: "Adopta una visi칩n intransigente sobre los temas de la vida, defendiendo firmemente.",
            },
            marriage: {
              en: "Takes an uncompromising view, upholding Church teaching.",
              es: "Adopta una visi칩n intransigente, defendiendo la ense침anza de la Iglesia.",
            },
          },
          leaning: {
            en: "Liturgical conservative with orthodox views, politically astute.",
            es: "Conservador lit칰rgico con puntos de vista ortodoxos, pol칤ticamente astuto.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/00FFFF/000000?text=Ranjith", // Different placeholder
        },
        {
          id: "cardinal_sarah",
          name: {
            en: "Cardinal Robert Sarah",
            es: "Cardenal Robert Sarah",
          },
          flag: "游섫릖",
          age: 79, // Turns 80 in June 2025, will lose voting rights
          role: {
            en: "Prefect Emeritus of the Congregation for Divine Worship and the Discipline of the Sacraments.",
            es: "Prefecto Em칠rito de la Congregaci칩n para el Culto Divino y la Disciplina de los Sacramentos.",
          },
          country: {
            en: "Guinea",
            es: "Guinea",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available, but generally critical of perceived deviations).",
              es: "(Postura espec칤fica no disponible, pero generalmente cr칤tico de las desviaciones percibidas).", // Corrected 'but' to 'pero'
            },
            women: {
              en: "(Specific stance not readily available, but generally traditionalist).",
              es: "(Postura espec칤fica no disponible, pero generalmente tradicionalista).", // Corrected 'but' to 'pero'
            },
            sameSex: {
              en: "Vocal defender of conservative moral teachings (implies opposition).",
              es: "Defensor vocal de las ense침anzas morales conservadoras (implica oposici칩n).",
            },
            humanae: {
              en: "Vocal defender of conservative moral teachings (implies upholding).",
              es: "Defensor vocal de las ense침anzas morales conservadoras (implica defenderla).",
            },
            marriage: {
              en: "Vocal defender of conservative moral teachings (implies upholding traditional teaching).",
              es: "Defensor vocal de las ense침anzas morales conservadoras (implica defender la ense침anza tradicional).",
            },
          },
          leaning: {
            en: "Leading Traditionalist/Conservative.",
            es: "Principal Tradicionalista/Conservador.",
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/800080/ffffff?text=Sarah", // Different placeholder
        },
        {
          id: "cardinal_sturla",
          name: {
            en: "Cardinal Daniel Fernando Sturla Berhouet",
            es: "Cardenal Daniel Fernando Sturla Berhouet",
          },
          flag: "游쥟릖",
          age: 65,
          role: {
            en: "Archbishop of Montevideo. Salesian.",
            es: "Arzobispo de Montevideo. Salesiano.",
          },
          country: {
            en: "Uruguay",
            es: "Uruguay",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            women: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            sameSex: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            humanae: {
              en: "(Specific stance not readily available)",
              es: "(Postura espec칤fica no disponible)",
            },
            marriage: {
              en: "Participated in the Synod on the Family (specific stance not detailed).",
              es: "Particip칩 en el S칤nodo sobre la Familia (postura espec칤fica no detallada).",
            },
          },
          leaning: {
            en: "Salesian background suggests a pastoral focus.",
            es: "Los antecedentes salesianos sugieren un enfoque pastoral.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/FFA500/ffffff?text=Sturla", // Different placeholder
        },
        {
          id: "cardinal_tagle",
          name: {
            en: "Cardinal Luis Antonio Gokim Tagle",
            es: "Cardenal Luis Antonio Gokim Tagle",
          },
          flag: "游왫릖",
          age: 67,
          role: {
            en: "Pro-Prefect for the Section of First Evangelization of the Dicastery for Evangelization. Former Archbishop of Manila.",
            es: "Pro-Prefecto de la Secci칩n para la Primera Evangelizaci칩n del Dicasterio para la Evangelizaci칩n. Ex Arzobispo de Manila.",
          },
          country: {
            en: "Philippines",
            es: "Filipinas",
          },
          keyIssues: {
            synodal: {
              en: "(Specific stance not readily available, but aligns with Francis on evangelization).",
              es: "(Postura espec칤fica no disponible, pero se alinea con Francisco en evangelizaci칩n).", // Corrected 'but' to 'pero'
            },
            women: {
              en: "(Specific stance not readily available).",
              es: "(Postura espec칤fica no disponible).",
            },
            sameSex: {
              en: 'Criticized the Church for using "harsh words" to describe LGBTQ people.',
              es: 'Critic칩 a la Iglesia por usar "palabras duras" para describir a las personas LGBTQ.',
            },
            humanae: {
              en: "Defends the Catholic Church's opposition to abortion and contraception.",
              es: "Defiende la oposici칩n de la Iglesia Cat칩lica al aborto y la anticoncepci칩n.",
            },
            marriage: {
              en: "Believes divorced and remarried Catholics should receive communion on a case-by-case basis.",
              es: "Cree que los cat칩licos divorciados y vueltos a casar deber칤an recibir la comuni칩n caso por caso.",
            },
          },
          leaning: {
            en: '"Asian Francis," progressive on pastoral approach/language, upholds traditional doctrine on core moral issues.',
            es: '"Francisco asi치tico", progresista en enfoque/lenguaje pastoral, defiende la doctrina tradicional en temas morales centrales.',
          },
          createdBy: {
            en: "Pope Benedict XVI",
            es: "Papa Benedicto XVI", // Corrected 'Benedict XVI'
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/4169E1/ffffff?text=Tagle", // Different placeholder
        },
        {
          id: "cardinal_zuppi",
          name: {
            en: "Cardinal Matteo Maria Zuppi",
            es: "Cardenal Matteo Maria Zuppi",
          },
          flag: "游쉻릖",
          age: 69,
          role: {
            en: "Archbishop of Bologna. President of the Italian Episcopal Conference.",
            es: "Arzobispo de Bolonia. Presidente de la Conferencia Episcopal Italiana.",
          },
          country: {
            en: "Italy",
            es: "Italia",
          },
          keyIssues: {
            synodal: {
              en: "Likely supportive, close to Francis.",
              es: "Probablemente de apoyo, cercano a Francisco.",
            },
            women: {
              en: "Does not exclude optional priestly celibacy (mencionando Eastern Rites).",
              es: "No excluye el celibato sacerdotal opcional (mencionando los Ritos Orientales).",
            },
            sameSex: {
              en: "Supports a new pastoral attitude towards LGBT Catholics.",
              es: "Apoya una nueva actitud pastoral hacia los cat칩licos LGBT.",
            },
            humanae: {
              en: "(Specific stance not readily available, but focus on pastoral care and poor).",
              es: "(Postura espec칤fica no disponible, pero enfoque en la atenci칩n pastoral y los pobres).", // Corrected 'but' to 'pero'
            },
            marriage: {
              en: "Supports a new pastoral attitude towards divorced and civilly 'remarried.'",
              es: "Apoya una nueva actitud pastoral hacia los divorciados y 'vueltos a casar' civilmente.",
            },
          },
          leaning: {
            en: "Close associate of Pope Francis, progressive, bridge-builder.",
            es: "Estrecho colaborador del Papa Francisco, progresista, constructor de puentes.",
          },
          createdBy: {
            en: "Pope Francis",
            es: "Papa Francisco",
          },
          // Placeholder image URL - replace with actual image
          imageUrl: "https://placehold.co/100x100/D2B48C/ffffff?text=Zuppi", // Different placeholder
        },
      ];

      const papalNames = [
        // Data structure for unique Pope and Antipope names with Spanish translations and counts.
        // Unique Pope Names

        { id: "name_adrian", name: { en: "Adrian", es: "Adri치n" }, count: 6 },
        {
          id: "name_agapetus",
          name: { en: "Agapetus", es: "Agapeto" },
          count: 2,
        },
        { id: "name_agatho", name: { en: "Agatho", es: "Agat칩n" }, count: 1 },
        {
          id: "name_alexander",
          name: { en: "Alexander", es: "Alejandro" },
          count: 8,
        },
        {
          id: "name_anastasius",
          name: { en: "Anastasius", es: "Anastasio" },
          count: 4,
        },
        {
          id: "name_anacletus",
          name: { en: "Anacletus", es: "Anacleto" },
          count: 1,
        },
        {
          id: "name_anicetus",
          name: { en: "Anicetus", es: "Aniceto" },
          count: 1,
        },
        { id: "name_anterus", name: { en: "Anterus", es: "Antero" }, count: 1 },
        {
          id: "name_benedict",
          name: { en: "Benedict", es: "Benedicto" },
          count: 16,
        },
        {
          id: "name_boniface",
          name: { en: "Boniface", es: "Bonifacio" },
          count: 9,
        },
        { id: "name_caius", name: { en: "Caius", es: "Cayo" }, count: 1 },
        {
          id: "name_callistus",
          name: { en: "Callistus", es: "Calixto" },
          count: 3,
        },
        {
          id: "name_celestine",
          name: { en: "Celestine", es: "Celestino" },
          count: 5,
        },
        {
          id: "name_clement",
          name: { en: "Clement", es: "Clemente" },
          count: 14,
        },
        { id: "name_conon", name: { en: "Conon", es: "Con칩n" }, count: 1 },
        {
          id: "name_constantine",
          name: { en: "Constantine", es: "Constantino" },
          count: 2,
        },
        {
          id: "name_cornelius",
          name: { en: "Cornelius", es: "Cornelio" },
          count: 1,
        },
        { id: "name_damasus", name: { en: "Damasus", es: "D치maso" }, count: 2 },
        {
          id: "name_deusdedit",
          name: { en: "Deusdedit", es: "Deusdedit or Adeodato" },
          count: 1,
        },
        {
          id: "name_dionysius",
          name: { en: "Dionysius", es: "Dionisio" },
          count: 1,
        },
        { id: "name_donus", name: { en: "Donus", es: "Dono" }, count: 1 },
        { id: "name_eugene", name: { en: "Eugene", es: "Eugenio" }, count: 4 },
        {
          id: "name_eusebius",
          name: { en: "Eusebius", es: "Eusebio" },
          count: 1,
        },
        {
          id: "name_eutychian",
          name: { en: "Eutychian", es: "Eutiquiano" },
          count: 1,
        },
        {
          id: "name_evaristus",
          name: { en: "Evaristus", es: "Evaristo" },
          count: 1,
        },
        { id: "name_fabian", name: { en: "Fabian", es: "Fabi치n" }, count: 1 },
        { id: "name_felix", name: { en: "Felix", es: "F칠lix" }, count: 5 },
        {
          id: "name_formosus",
          name: { en: "Formosus", es: "Formoso" },
          count: 1,
        },
        {
          id: "name_francis",
          name: { en: "Francis", es: "Francisco" },
          count: 1,
        },
        {
          id: "name_gelasius",
          name: { en: "Gelasius", es: "Gelasio" },
          count: 2,
        },
        {
          id: "name_gregory",
          name: { en: "Gregory", es: "Gregorio" },
          count: 16,
        },
        {
          id: "name_hadrian",
          name: { en: "Hadrian", es: "Adriano" },
          count: 1,
        }, // Note: This seems to be a variation of Adrian, kept separate as per list
        {
          id: "name_hilarius",
          name: { en: "Hilarius", es: "Hilario" },
          count: 1,
        },
        {
          id: "name_honorius",
          name: { en: "Honorius", es: "Honorio" },
          count: 4,
        },
        {
          id: "name_hormisdas",
          name: { en: "Hormisdas", es: "Hormisdas" },
          count: 1,
        },
        {
          id: "name_innocent",
          name: { en: "Innocent", es: "Inocencio" },
          count: 13,
        },
        { id: "name_john", name: { en: "John", es: "Juan" }, count: 23 },
        {
          id: "name_john_paul",
          name: { en: "John Paul", es: "Juan Pablo" },
          count: 2,
        },
        { id: "name_julius", name: { en: "Julius", es: "Julio" }, count: 3 },
        { id: "name_leo", name: { en: "Leo", es: "Le칩n" }, count: 13 },
        {
          id: "name_liberius",
          name: { en: "Liberius", es: "Liberio" },
          count: 1,
        },
        { id: "name_linus", name: { en: "Linus", es: "Lino" }, count: 1 },
        { id: "name_lucius", name: { en: "Lucius", es: "Lucio" }, count: 3 },
        {
          id: "name_marcellinus",
          name: { en: "Marcellinus", es: "Marcelino" },
          count: 1,
        },
        {
          id: "name_marcellus",
          name: { en: "Marcellus", es: "Marcelo" },
          count: 2,
        },
        { id: "name_marinus", name: { en: "Marinus", es: "Marino" }, count: 2 },
        { id: "name_martin", name: { en: "Martin", es: "Mart칤n" }, count: 5 },
        {
          id: "name_maurice",
          name: { en: "Maurice", es: "Mauricio" },
          count: 1,
        },
        {
          id: "name_miltiades",
          name: { en: "Miltiades", es: "Melqu칤ades" },
          count: 1,
        },
        {
          id: "name_nicholas",
          name: { en: "Nicholas", es: "Nicol치s" },
          count: 5,
        },
        {
          id: "name_paschal",
          name: { en: "Paschal", es: "Pascual" },
          count: 2,
        },
        { id: "name_paul", name: { en: "Paul", es: "Pablo" }, count: 6 },
        {
          id: "name_pelagius",
          name: { en: "Pelagius", es: "Pelagio" },
          count: 2,
        },
        { id: "name_peter", name: { en: "Peter", es: "Pedro" }, count: 1 },
        { id: "name_pius", name: { en: "Pius", es: "P칤o" }, count: 12 },
        {
          id: "name_pontian",
          name: { en: "Pontian", es: "Pontiano" },
          count: 1,
        },
        { id: "name_roman", name: { en: "Roman", es: "Romano" }, count: 1 },
        { id: "name_sergius", name: { en: "Sergius", es: "Sergio" }, count: 4 },
        {
          id: "name_silverius",
          name: { en: "Silverius", es: "Silverio" },
          count: 1,
        },
        { id: "name_sint", name: { en: "Sint", es: "Sint" }, count: 1 }, // Name appears as "Sint" in list, kept as is
        {
          id: "name_siricius",
          name: { en: "Siricius", es: "Siricio" },
          count: 1,
        },
        { id: "name_sixtus", name: { en: "Sixtus", es: "Sixto" }, count: 5 },
        {
          id: "name_stephen",
          name: { en: "Stephen", es: "Esteban" },
          count: 9,
        },
        {
          id: "name_sylvester",
          name: { en: "Sylvester", es: "Silvestre" },
          count: 3,
        },
        {
          id: "name_symphorian",
          name: { en: "Symphorian", es: "Sinforiano" },
          count: 1,
        },
        {
          id: "name_telesphorus",
          name: { en: "Telesphorus", es: "Telesforo" },
          count: 1,
        },
        {
          id: "name_theodore",
          name: { en: "Theodore", es: "Teodoro" },
          count: 2,
        },
        { id: "name_titus", name: { en: "Titus", es: "Tito" }, count: 1 },
        { id: "name_urban", name: { en: "Urban", es: "Urbano" }, count: 8 },
        {
          id: "name_valentine",
          name: { en: "Valentine", es: "Valent칤n" },
          count: 1,
        },
        { id: "name_victor", name: { en: "Victor", es: "V칤ctor" }, count: 3 },
        {
          id: "name_vigilius",
          name: { en: "Vigilius", es: "Vigilio" },
          count: 1,
        },
        {
          id: "name_vitalian",
          name: { en: "Vitalian", es: "Vitaliano" },
          count: 1,
        },
        {
          id: "name_zachary",
          name: { en: "Zachary", es: "Zacar칤as" },
          count: 1,
        },
        {
          id: "name_zephyrinus",
          name: { en: "Zephyrinus", es: "Ceferino" },
          count: 1,
        },
        { id: "name_zosimus", name: { en: "Zosimus", es: "Z칩simo" }, count: 1 },
        {
          id: "name_adeodatus",
          name: { en: "Adeodatus", es: "Adeodato" },
          count: 2,
        },

        // Unique Antipope Names (Commented out if name duplicates a Pope name appearing earlier)
        {
          id: "name_adalbert",
          name: { en: "Adalbert", es: "Adalberto" },
          count: 1,
        },
        { id: "name_albert", name: { en: "Albert", es: "Alberto" }, count: 1 },
        // { id: "name_alexander_antipope", name: { en: "Alexander", es: "Alejandro" }, count: 3 }, // Duplicates Pope Alexander
        // { id: "name_anacletus_antipope", name: { en: "Anacletus", es: "Anacleto" }, count: 2 }, // Duplicates Pope Anacletus
        // { id: "name_anastasius_antipope", name: { en: "Anastasius", es: "Anastasio" }, count: 2 }, // Duplicates Pope Anastasius
        // { id: "name_benedict_antipope", name: { en: "Benedict", es: "Benedicto" }, count: 4 }, // Duplicates Pope Benedict
        // { id: "name_boniface_antipope", name: { en: "Boniface", es: "Bonifacio" }, count: 2 }, // Duplicates Pope Boniface
        // { id: "name_callistus_antipope", name: { en: "Callistus", es: "Calixto" }, count: 1 }, // Duplicates Pope Callistus
        // { id: "name: "name_celestine_antipope", name: { en: "Celestine", es: "Celestino" }, count: 2 }, // Duplicates Pope Celestine
        {
          id: "name_christopher",
          name: { en: "Christopher", es: "Crist칩bal" },
          count: 1,
        },
        // { id: "name_clement_antipope", name: { en: "Clement", es: "Clemente" }, count: 3 }, // Duplicates Pope Clement
        // { id: "name_constantine_antipope", name: { en: "Constantine", es: "Constantino" }, count: 2 }, // Duplicates Pope Constantine
        {
          id: "name_dioscorus",
          name: { en: "Dioscorus", es: "Di칩scoro" },
          count: 1,
        },
        {
          id: "name_eulalius",
          name: { en: "Eulalius", es: "Eulalio" },
          count: 1,
        },
        // { id: "name_felix_antipope", name: { en: "Felix", es: "F칠lix" }, count: 2 }, // Duplicates Pope Felix
        // { id: "name_gregory_antipope", name: { en: "Gregory", es: "Gregorio" }, count: 4 }, // Duplicates Pope Gregory
        {
          id: "name_heraclius",
          name: { en: "Heraclius", es: "Heraclio" },
          count: 1,
        },
        {
          id: "name_hippolytus",
          name: { en: "Hippolytus", es: "Hip칩lito" },
          count: 1,
        },
        // { id: "name_honorius_antipope", name: { en: "Honorius", es: "Honorio" }, count: 1 }, // Duplicates Pope Honorius
        // { id: "name_innocent_antipope", name: { en: "Innocent", es: "Inocencio" }, count: 1 }, // Duplicates Pope Innocent
        // { id: "name_john_antipope", name: { en: "John", es: "Juan" }, count: 4 }, // Duplicates Pope John
        {
          id: "name_laurentius",
          name: { en: "Laurentius", es: "Lorenzo" },
          count: 1,
        },
        // { id: "name_leo_antipope", name: { en: "Leo", es: "Le칩n" }, count: 1 }, // Duplicates Pope Leo
        // { id: "name_martin_antipope", name: { en: "Martin", es: "Mart칤n" }, count: 1 }, // Duplicates Pope Martin
        // { id: "name_paschal_antipope", name: { en: "Paschal", es: "Pascual" }, count: 1 }, // Duplicates Pope Paschal
        { id: "name_philip", name: { en: "Philip", es: "Felipe" }, count: 1 },
        // { id: "name_sylvester_antipope", name: { en: "Sylvester", es: "Silvestre" }, count: 1 }, // Duplicates Pope Sylvester
        // { id: "name_theodore_antipope", name: { en: "Theodore", es: "Teodoro" }, count: 1 }, // Duplicates Pope Theodore
        // { id: "name_victor_antipope", name: { en: "Victor", es: "V칤ctor" }, count: 3 }, // Duplicates Pope Victor
        {
          id: "name_ursicinus",
          name: { en: "Ursicinus", es: "Ursicino" },
          count: 1,
        },
        // { id: "name_zephyrinus_antipope", name: { en: "Zephyrinus", es: "Ceferino" }, count: 1 }, // Duplicates Pope Zephyrinus
        {
          id: "name_benedict_xiv",
          name: { en: "Benedict XIV", es: "Benedicto XIV" },
          count: 2,
        },
      ];

      // Arrays to store user's selections
      let selectedCardinalPicks = []; // Stores objects like { id: '...', name: '...' }
      let selectedPapalNameIds = []; // Stores string IDs like 'name_john'

      // Variables to track validation modal state for re-rendering on language change
      let currentValidationMessageKey = null;
      let isCurrentModalResetConfirmation = false;

      // Function to update static text based on current language
      function updateStaticLanguage(lang) {
        currentLang = lang;
        document.querySelectorAll("[data-translate]").forEach((element) => {
          const key = element.getAttribute("data-translate");
          if (translations[lang] && translations[lang][key]) {
            if (
              !element.closest(".modal-content") ||
              element.hasAttribute("data-translate")
            ) {
              element.textContent = translations[lang][key];
            }
          }
        });

        // Update language button active state
        document.querySelectorAll(".language-button").forEach((button) => {
          if (button.getAttribute("data-lang") === lang) {
            button.classList.add("active");
          } else {
            button.classList.remove("active");
          }
        });

        // Update dark mode toggle text
        const darkModeToggleText = document.querySelector(
          "#darkModeToggle span[data-translate]"
        );
        if (darkModeToggleText) {
          const isDarkMode = document.body.classList.contains("dark-mode");
          darkModeToggleText.textContent = isDarkMode
            ? translations[lang].lightMode
            : translations[lang].darkMode;
        }

        // Re-render candidates and papal names to apply language
        renderCardinals(currentLang);
        renderPapalNames(currentLang);

        // Check and update visible modals on language change
        const confirmationModalOverlay = document.getElementById(
          "confirmationModalOverlay"
        );
        const validationModalOverlay = document.getElementById(
          "validationModalOverlay"
        );

        // If confirmation modal is open, re-populate its lists with the new language
        if (
          confirmationModalOverlay &&
          confirmationModalOverlay.classList.contains("visible")
        ) {
          showConfirmationModal(selectedCardinalPicks, selectedPapalNameIds);
        }

        // If validation modal is open, re-display it using the stored state
        if (
          validationModalOverlay &&
          validationModalOverlay.classList.contains("visible")
        ) {
          if (currentValidationMessageKey) {
            showValidationModal(
              currentValidationMessageKey,
              isCurrentModalResetConfirmation
            );
          }
        }
      }

      // Function to generate HTML for a single cardinal item
      function generateCardinalHTML(cardinal, lang) {
        const t = translations[lang];
        const name =
          cardinal.name[lang] || cardinal.name["en"] || "Unknown Cardinal";
        const leaning =
          cardinal.leaning[lang] ||
          cardinal.leaning["en"] ||
          t.stanceNotAvailable;
        const role =
          cardinal.role[lang] || cardinal.role["en"] || t.stanceNotAvailable;
        const country =
          cardinal.country[lang] ||
          cardinal.country["en"] ||
          t.stanceNotAvailable;

        // Build key issues list dynamically
        let keyIssuesHtml = "";
        const keyIssuesLabels = {
          synodal: t.synodalIssue,
          women: t.womenIssue,
          sameSex: t.sameSexIssue,
          humanae: t.humanaeIssue,
          marriage: t.marriageIssue,
        };

        for (const issueKey in cardinal.keyIssues) {
          if (cardinal.keyIssues.hasOwnProperty(issueKey)) {
            const issueText =
              cardinal.keyIssues[issueKey][lang] ||
              cardinal.keyIssues[issueKey]["en"] ||
              t.stanceNotAvailable;
            const issueLabel = keyIssuesLabels[issueKey] || issueKey;
            keyIssuesHtml += `<li><strong>${issueLabel}</strong> ${issueText}</li>`;
          }
        }

        return `
                      <div class="candidate-section" data-cardinal-id="${
                        cardinal.id
                      }">
                           <label for="cardinal_${
                             cardinal.id
                           }" class="candidate-label">
                              <div class="rank-indicator"></div> <div class="candidate-info">
                                  <h3>
                                      ${name} <span class="flag">${
          cardinal.flag
        }</span>
                                  </h3>
                                  <ul>
                                      <li><strong>${
                                        t.leaningLabel
                                      }</strong> ${leaning}</li>
                                      <li><strong>Role:</strong> ${role}</li>
                                      <li><strong>Country:</strong> ${country}</li>
                                      <li><strong>Age:</strong> ${
                                        cardinal.age || "N/A"
                                      }</li>
                                      <li><strong>Created By:</strong> ${
                                        cardinal.createdBy
                                          ? cardinal.createdBy[lang] ||
                                            cardinal.createdBy["en"] ||
                                            "Unknown"
                                          : "Unknown"
                                      }</li>
                                      <li>
                                          <span class="key-issues-toggle" role="button" aria-expanded="false" aria-controls="${
                                            cardinal.id
                                          }_issues">
                                              <strong>${
                                                t.keyIssuesLabel
                                              }</strong> <span class="toggle-text">${
          t.clickToExpand
        }</span>
                                          </span>
                                          <div class="key-issues-content" id="${
                                            cardinal.id
                                          }_issues" aria-hidden="true">
                                              <ul>
                                                  ${keyIssuesHtml}
                                              </ul>
                                          </div>
                                      </li>
                                  </ul>
                              </div>
                          </label>
                      </div>
                  `;
      }

      // Function to render the list of cardinals in the UI
      function renderCardinals(lang) {
        const candidateGrid = document.getElementById("candidateGrid");
        if (candidateGrid) {
          candidateGrid.innerHTML = cardinals
            .map((cardinal) => generateCardinalHTML(cardinal, lang))
            .join("");
          attachCardinalClickListeners();
          updateCardinalVisuals();
        }
      }

      // Function to generate HTML for a single papal name list item
      function generatePapalNameHTML(nameData, lang) {
        const t = translations[lang];
        const name =
          nameData.name[lang] || nameData.name["en"] || "Unknown Name";
        const usedTimesText = t.usedTimes.replace("{count}", nameData.count);
        const isSelected = selectedPapalNameIds.includes(nameData.id);
        return `
                      <li class="papal-name-item ${
                        isSelected ? "selected" : ""
                      }" data-name-id="${nameData.id}">
                          <input type="checkbox" id="${
                            nameData.id
                          }" name="papalName" value="${name}" class="form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500" ${
          isSelected ? "checked" : ""
        }>
                          <label for="${
                            nameData.id
                          }" class="flex items-center w-full cursor-pointer">
                               <span>${name}</span>
                               <span class="name-info">${usedTimesText}</span>
                          </label>
                      </li>
                  `;
      }

      // Function to render the list of papal names in the UI
      function renderPapalNames(lang) {
        const papalNameListElement = document.getElementById("papalNameList");
        if (papalNameListElement) {
          papalNameListElement.innerHTML = papalNames
            .map((name) => generatePapalNameHTML(name, lang))
            .join("");
          attachPapalNameClickListeners();
        }
      }

      // Function to update the visual feedback on selected cardinals (adding rank indicators and styles)
      function updateCardinalVisuals() {
        document.querySelectorAll(".candidate-label").forEach((label) => {
          label.classList.remove("selected", "rank-1", "rank-2", "rank-3");
          const rankIndicator = label.querySelector(".rank-indicator");
          if (rankIndicator) {
            rankIndicator.textContent = "";
            rankIndicator.style.opacity = 0;
          }
        });

        selectedCardinalPicks.forEach((pick, index) => {
          const label = document.querySelector(
            `.candidate-section[data-cardinal-id="${pick.id}"] .candidate-label`
          );
          if (label) {
            const rank = index + 1;
            label.classList.add("selected", `rank-${rank}`);
            const rankIndicator = label.querySelector(".rank-indicator");
            if (rankIndicator) {
              rankIndicator.textContent = rank;
              rankIndicator.style.opacity = 1;
            }
          }
        });
      }

      // Function to attach click listeners to cardinal labels for selection logic
      function attachCardinalClickListeners() {
        document.querySelectorAll(".candidate-label").forEach((label) => {
          label.addEventListener("click", function (event) {
            if (event.target.closest(".key-issues-toggle")) {
              return;
            }

            const candidateSection = this.closest(".candidate-section");
            const cardinalId =
              candidateSection.getAttribute("data-cardinal-id");
            const cardinal = cardinals.find((c) => c.id === cardinalId);

            if (!cardinal) return;

            const existingIndex = selectedCardinalPicks.findIndex(
              (pick) => pick.id === cardinalId
            );

            if (existingIndex === -1) {
              if (selectedCardinalPicks.length < 3) {
                selectedCardinalPicks.push({
                  id: cardinal.id,
                  name: cardinal.name[currentLang] || cardinal.name["en"],
                });
              } else {
                showValidationModal("round1LimitAlert");
                return;
              }
            } else {
              selectedCardinalPicks.splice(existingIndex, 1);
            }

            updateCardinalVisuals();
          });
        });
      }

      // Function to attach change listeners to papal name checkboxes for selection logic
      function attachPapalNameClickListeners() {
        document
          .querySelectorAll('.papal-name-item input[type="checkbox"]')
          .forEach((checkbox) => {
            checkbox.addEventListener("change", function () {
              const listItem = this.closest(".papal-name-item");
              const nameId = listItem.getAttribute("data-name-id");
              const nameData = papalNames.find((name) => name.id === nameId);
              const nameInCurrentLang = nameData
                ? nameData.name[currentLang] || nameData.name["en"]
                : nameId;

              if (this.checked) {
                if (selectedPapalNameIds.length < 5) {
                  selectedPapalNameIds.push(nameId);
                  listItem.classList.add("selected");
                  this.value = nameInCurrentLang;
                } else {
                  this.checked = false;
                  showValidationModal("round2LimitAlert");
                }
              } else {
                const index = selectedPapalNameIds.indexOf(nameId);
                if (index > -1) {
                  selectedPapalNameIds.splice(index, 1);
                  listItem.classList.remove("selected");
                }
              }
            });
          });
      }

      // Function to show the confirmation modal with current selections
      function showConfirmationModal(cardinalPicks, papalNamePicks) {
        const modalOverlay = document.getElementById(
          "confirmationModalOverlay"
        );
        const modalCardinalPicksList =
          document.getElementById("modalCardinalPicks");
        const modalPapalNamePicksList = document.getElementById(
          "modalPapalNamePicks"
        );
        const t = translations[currentLang];

        if (modalOverlay && modalCardinalPicksList && modalPapalNamePicksList) {
          modalCardinalPicksList.innerHTML = "";
          modalPapalNamePicksList.innerHTML = "";

          cardinalPicks.forEach((pick, index) => {
            const listItem = document.createElement("li");
            const points = [5, 3, 1][index];
            const rankTranslationKey = `round1Points${index + 1}`;
            const rankText = translations[currentLang][rankTranslationKey]
              ? translations[currentLang][rankTranslationKey].split(" ")[0]
              : `${pick.rank}${
                  pick.rank === 1
                    ? "st"
                    : pick.rank === 2
                    ? "nd"
                    : pick.rank === 3
                    ? "rd"
                    : ""
                }`;
            const cardinal = cardinals.find((c) => c.id === pick.id);
            const cardinalNameInCurrentLang = cardinal
              ? cardinal.name[currentLang] || cardinal.name["en"]
              : pick.name;

            listItem.textContent = `${rankText} (${points} pts): ${cardinalNameInCurrentLang}`;
            modalCardinalPicksList.appendChild(listItem);
          });

          papalNamePicks.forEach((nameId) => {
            const nameData = papalNames.find((name) => name.id === nameId);
            const nameInCurrentLang = nameData
              ? nameData.name[currentLang] || nameData.name["en"]
              : nameId;
            const listItem = document.createElement("li");
            listItem.textContent = `- ${nameInCurrentLang}`;
            modalPapalNamePicksList.appendChild(listItem);
          });

          modalOverlay.querySelector("h3[data-translate]").textContent =
            t.confirmModalTitle;
          modalOverlay.querySelector(
            'p[data-translate="confirmModalPicksLabel"]'
          ).textContent = t.confirmModalPicksLabel;
          modalOverlay.querySelector(
            'p[data-translate="confirmModalNamesLabel"]'
          ).textContent = t.confirmModalNamesLabel;
          modalOverlay.querySelector(
            'button[data-translate="confirmButton"]'
          ).textContent = t.confirmButton;
          modalOverlay.querySelector(
            'button[data-translate="cancelButton"]'
          ).textContent = t.cancelButton;

          modalOverlay.classList.add("visible");
        } else {
          console.error("Confirmation modal elements not found!");
        }
      }

      // Function to hide the confirmation modal
      function hideConfirmationModal() {
        const modalOverlay = document.getElementById(
          "confirmationModalOverlay"
        );
        if (modalOverlay) {
          modalOverlay.classList.remove("visible");
        }
      }

      // Function to show the validation or reset confirmation modal
      function showValidationModal(messageKey, isResetConfirmation = false) {
        const modalOverlay = document.getElementById("validationModalOverlay");
        const modalTitle = modalOverlay.querySelector("h3");
        const modalMessage = document.getElementById("validationModalMessage");
        const modalButtonsDiv = modalOverlay.querySelector(".modal-buttons");
        const okButton = document.getElementById("validationModalOkButton");
        const t = translations[currentLang];

        if (
          modalOverlay &&
          modalTitle &&
          modalMessage &&
          modalButtonsDiv &&
          okButton
        ) {
          currentValidationMessageKey = messageKey;
          isCurrentModalResetConfirmation = isResetConfirmation;

          modalMessage.innerHTML = "";

          if (isResetConfirmation) {
            modalTitle.textContent = t.resetModalTitle;
            modalMessage.textContent = t.resetModalMessage;
            okButton.textContent = t.resetButtonOK;
          } else {
            modalTitle.textContent = t.validationModalTitle;
            modalMessage.textContent = t[messageKey] || messageKey;
            okButton.textContent = t.okButton;
          }

          modalOverlay.classList.add("visible");
        } else {
          console.error("Validation modal elements not found!");
          alert(translations[currentLang][messageKey] || messageKey);
        }
      }

      // Function to hide the validation or reset confirmation modal
      function hideValidationModal() {
        const modalOverlay = document.getElementById("validationModalOverlay");
        if (modalOverlay) {
          modalOverlay.classList.remove("visible");
          currentValidationMessageKey = null;
          isCurrentModalResetConfirmation = false;
        }
      }

      //
      // Event Listeners and Initialization
      // This section sets up event listeners for user interactions and
      // initializes the page content when the DOM is fully loaded.
      //
      document.addEventListener("DOMContentLoaded", function () {
        const languageButtons = document.querySelectorAll(".language-button");
        const submitBtn = document.getElementById("submitBtn");
        const playerNameInput = document.getElementById("playerName");
        const submissionOutputDiv = document.getElementById("submissionOutput");
        const outputContentPre = document.getElementById("outputContent");
        const confirmationModalOverlay = document.getElementById(
          "confirmationModalOverlay"
        );
        const confirmSubmitButton = document.getElementById(
          "confirmSubmitButton"
        );
        const cancelSubmitButton =
          document.getElementById("cancelSubmitButton");
        const resetButton = document.getElementById("resetBallotButton");
        const darkModeToggle = document.getElementById("darkModeToggle");
        const darkModeToggleText = darkModeToggle.querySelector(
          "span[data-translate]"
        );
        const darkModeToggleIcon = darkModeToggle.querySelector(".icon");
        const candidateGrid = document.getElementById("candidateGrid");

        const validationModalOverlay = document.getElementById(
          "validationModalOverlay"
        );
        const validationModalOkButton = document.getElementById(
          "validationModalOkButton"
        );

        // Attach event listeners for language toggle buttons
        if (languageButtons.length > 0) {
          languageButtons.forEach((button) => {
            button.addEventListener("click", function () {
              const lang = this.getAttribute("data-lang");
              if (lang) {
                updateStaticLanguage(lang);
              }
            });
          });
        }

        // Attach event listener for dark mode toggle button
        if (darkModeToggle) {
          darkModeToggle.addEventListener("click", function () {
            document.body.classList.toggle("dark-mode");
            const isDarkMode = document.body.classList.contains("dark-mode");

            if (darkModeToggleText && darkModeToggleIcon) {
              const t = translations[currentLang];
              if (isDarkMode) {
                darkModeToggleText.textContent = t.lightMode;
                darkModeToggleIcon.textContent = "驕勇";
              } else {
                darkModeToggleText.textContent = t.darkMode;
                darkModeToggleIcon.textContent = "游깿";
              }
            }
          });
        }

        // Set default language and render content on page load
        const defaultLang = "en";
        updateStaticLanguage(defaultLang);

        // Use event delegation for key issues toggle clicks within the candidate grid
        if (candidateGrid) {
          candidateGrid.addEventListener("click", function (event) {
            const toggle = event.target.closest(".key-issues-toggle");
            if (toggle) {
              event.stopPropagation();

              const content = toggle.nextElementSibling;
              const toggleTextSpan = toggle.querySelector(".toggle-text");

              if (content && toggleTextSpan) {
                content.classList.toggle("active");
                const isExpanded = content.classList.contains("active");
                toggle.setAttribute("aria-expanded", isExpanded);
                content.setAttribute("aria-hidden", !isExpanded);

                toggleTextSpan.textContent = isExpanded
                  ? translations[currentLang].clickToCollapse
                  : translations[currentLang].clickToExpand;
              }
            }
          });
        }

        // Attach event listener for the submit button
        submitBtn.addEventListener("click", function () {
          const playerName = playerNameInput.value.trim();
          if (!playerName) {
            showValidationModal("playerNameAlert");
            return;
          }

          if (selectedCardinalPicks.length !== 3) {
            showValidationModal("round1LimitAlert");
            return;
          }

          if (selectedPapalNameIds.length !== 5) {
            showValidationModal("round2LimitAlert");
            return;
          }

          showConfirmationModal(selectedCardinalPicks, selectedPapalNameIds);

          confirmSubmitButton.onclick = null;
          confirmSubmitButton.onclick = async function () {
            hideConfirmationModal();
            const t = translations[currentLang];

            // Google Form endpoint URL (replace with your actual URL)
            const googleFormEndpoint =
              "https://docs.google.com/forms/d/e/1FAIpQLSe6Vcxwo_Br9xhnZMTBpdlY6bhFZeDd8p43_Cu1rRyUHqFMkg/formResponse";

            // Prepare data for submission to Google Form
            const formData = new URLSearchParams();

            // Add Player Name (replace with your Google Form field ID)
            formData.append("entry.1785387111", playerName);

            // Add Cardinal Picks (replace with your Google Form field IDs for each pick)
            selectedCardinalPicks.forEach((pick, index) => {
              const cardinal = cardinals.find((c) => c.id === pick.id);
              const cardinalNameInCurrentLang = cardinal
                ? cardinal.name[currentLang] || cardinal.name["en"]
                : pick.name;
              const fieldId = [
                "entry.860598294", // ID for 1st pick
                "entry.1730489960", // ID for 2nd pick
                "entry.1148322132", // ID for 3rd pick
              ][index];

              if (fieldId) {
                formData.append(fieldId, cardinalNameInCurrentLang);
              } else {
                console.error(
                  `Missing Google Form field ID for cardinal pick rank ${
                    index + 1
                  }`
                );
              }
            });

            // Add Papal Name Picks (replace with your Google Form field IDs for each name)
            selectedPapalNameIds.forEach((id, index) => {
              const nameData = papalNames.find((name) => name.id === id);
              const nameInCurrentLang = nameData
                ? nameData.name[currentLang] || nameData.name["en"]
                : id;
              const fieldId = [
                "entry.422513893", // ID for name 1
                "entry.655507965", // ID for name 2
                "entry.1292500793", // ID for name 3
                "entry.520868817", // ID for name 4
                "entry.854556271", // ID for name 5
              ][index];

              if (fieldId) {
                formData.append(fieldId, nameInCurrentLang);
              } else {
                console.error(
                  `Missing Google Form field ID for papal name pick ${
                    index + 1
                  }`
                );
              }
            });

            console.log("Data to send to Google Form:", formData.toString());

            // Send data to Google Form using fetch API
            try {
              const response = await fetch(googleFormEndpoint, {
                method: "POST",
                mode: "no-cors", // Required for cross-origin requests to Google Forms
                headers: {
                  "Content-Type": "application/x-www-form-urlencoded",
                },
                body: formData.toString(),
              });

              console.log("Attempted submission to Google Form.");
              showValidationModal("submissionSuccessAlert");
            } catch (error) {
              console.error("Error sending submission to Google Form:", error);
              showValidationModal(`Error sending submission: ${error.message}`);
            }
          };

          // Attach event listener for the cancel button in the confirmation modal
          cancelSubmitButton.onclick = null;
          cancelSubmitButton.onclick = function () {
            hideConfirmationModal();
          };
        });

        // Attach event listener for the reset button
        if (resetButton) {
          resetButton.addEventListener("click", function () {
            showValidationModal("resetModalMessage", true);

            validationModalOkButton.removeEventListener(
              "click",
              handleResetConfirmation
            );
            validationModalOkButton.addEventListener(
              "click",
              handleResetConfirmation,
              { once: true }
            );
          });
        }

        // Function to handle the actual reset logic after confirmation
        function handleResetConfirmation() {
          selectedCardinalPicks = [];
          updateCardinalVisuals();

          selectedPapalNameIds = [];
          document
            .querySelectorAll('.papal-name-item input[type="checkbox"]')
            .forEach((cb) => {
              cb.checked = false;
              cb.closest(".papal-name-item").classList.remove("selected");
            });

          playerNameInput.value = "";

          submissionOutputDiv.classList.add("hidden");
          outputContentPre.textContent = "";

          hideValidationModal();
        }

        // Attach default click listener to the validation modal's OK button
        if (validationModalOkButton) {
          validationModalOkButton.addEventListener(
            "click",
            hideValidationModal
          );
        }
      });
    </script>
  </body>
</html>
